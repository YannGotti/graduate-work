function deleteItem(b){const a=document.getElementById("del_mark_user_input_"+b);b=document.getElementById("del_mark_material_input_"+b);const d=new FormData;d.append("user",a.value);d.append("material",b.value);fetch($("#deleteForm").attr("action"),{method:"DELETE",body:d,processData:!1,contentType:!1,headers:{"X-CSRFToken":Cookies.get("csrftoken")}}).then(c=>{if(!c.ok)throw Error(`HTTP error! Status: ${c.status}`);return c.json()}).then(c=>{c.status&&location.reload()}).catch(c=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",
c)})}
function editMaterialPut(b,a){const d=new FormData(document.getElementById("editMaterialForm")),c=document.getElementById("description_input").value,f=document.getElementById("validation_form");d.append("description",c);fetch(`/material/edit/${a}/`,{method:"PUT",body:d,headers:{"X-CSRFToken":Cookies.get("csrftoken")}}).then(e=>{if(!e.ok)throw Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(e=>{e.status||(f.innerText=e.error);return e}).then(e=>{e.status&&location.replace(`/${b}/${e.material_name}/`);return e}).catch(e=>
{f.innerText="\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.";console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",e)})}
function deleteMaterialDel(b){fetch(`/material/delete/${b}/`,{method:"DELETE",headers:{"X-CSRFToken":Cookies.get("csrftoken")}}).then(a=>{if(!a.ok)throw Error(`HTTP error! Status: ${a.status}`);return a.json()}).then(a=>{location.replace(`/${a.username}`);return a}).catch(a=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",a);document.getElementById("validation_form").innerText="\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."})}
function getSearchMaterial(){const b=parseUsernameMaterial(searchInput.value);fetch(`/api/search?username=${b.username.substring(1)}&material=${b.material}`).then(a=>{if(!a.ok)throw Error(`Network response was not ok: ${a.status}`);return a.json()}).then(a=>{drawSearchMaterialsUsers(JSON.parse(a.materials),JSON.parse(a.users));return a}).catch(a=>{console.error("There was a problem with the fetch operation:",a)})}
async function getIsFollowingUser(b,a){const d=document.getElementById("buttonFollowingUser");let c;try{const f=await fetch(`/api/getIsFollowing?username=${b}&following=${a}`);if(!f.ok)throw Error(`Network response was not ok: ${f.status}`);const e=await f.json();e.status&&(d.innerText="\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",c=e.status);e.status||(d.innerText="\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",c=e.status);return c}catch(f){throw console.error("There was a problem with the fetch operation:",
f),f;}}async function followingUser(b,a){const d=await getIsFollowingUser(b,a);try{const c=await fetch("/api/following_user",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Cookies.get("csrftoken")},body:JSON.stringify({username:b,following:a,status:d})});if(!c.ok)throw Error(`Network response was not ok: ${c.status}`);(await c.json()).status&&location.reload();return d}catch(c){throw console.error("There was a problem with the fetch operation:",c),c;}}
function uploadProfileImage(){const b=document.getElementById("profileImageInput");if(0!=b.files.length){var a=new FormData;a.append("profile_image",b.files[0]);fetch("/api/uploadProfileImage",{method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},body:a}).then(d=>{if(!d.ok)throw Error(`Network response was not ok: ${d.status}`);return d.json()}).then(d=>{location.reload()}).catch(d=>{console.error("There was a problem with the fetch operation:",d)})}}
function editInformationUser(){const b=new FormData;b.append("email",document.getElementById("email_input").value);b.append("fullName",document.getElementById("fullname_input").value);b.append("name",document.getElementById("name_input").value);b.append("userPlaceOfStudy",document.getElementById("study_input").value);fetch("/api/editInformationUser",{method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},body:b}).then(a=>{if(!a.ok)throw Error(`Network response was not ok: ${a.status}`);return a.json()}).then(a=>
{a.status&&location.reload();return a}).then(a=>{a.status||(document.getElementById("field_validation_register").innerText="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430 \u043f\u043e\u043b\u0435\u0439");return a}).catch(a=>{console.error("There was a problem with the fetch operation:",a)})}
function editPasswordUser(){const b=new FormData;b.append("old_password",document.getElementById("old_password_input").value);b.append("new_password",document.getElementById("new_password_input").value);fetch("/api/editPasswordUser",{method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},body:b}).then(a=>{if(!a.ok)throw Error(`Network response was not ok: ${a.status}`);return a.json()}).then(a=>{a.status&&(console.log(a),location.reload());return a}).then(a=>{a.status||(document.getElementById("field_validation_edit_password").innerText=
a.message);return a}).catch(a=>{console.error("There was a problem with the fetch operation:",a)})}function isDeleteMaterial(){document.getElementById("validateButtonDeleteMaterial").style.display="block"};
