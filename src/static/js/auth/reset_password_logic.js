$(document).ready(function(){Inputmask({mask:"999999"}).mask("#code_reset")});
function sendMailResetPassword(){var c=document.getElementById("reset_email_input");const f=document.getElementById("reset_message"),g=document.getElementById("reset_message_send"),e=document.getElementById("validation_reset_form"),d=document.getElementById("reset_message_error_not_user"),b=document.getElementById("reset_progress");b.style.display="block";c={email:c.value};fetch("/auth/reset_password",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Cookies.get("csrftoken")},
body:JSON.stringify(c)}).then(a=>{if(!a.ok)throw Error(`HTTP error! Status: ${a.status}`);return a.json()}).then(a=>{a.status||(d.style.display="block",b.style.display="none");a.status&&(b.style.display="none",f.style.display="none",d.style.display="none",g.style.display="block",e.style.display="block")}).catch(a=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",a)})}
function verifyCodeResetPassword(){var c=document.getElementById("reset_email_input");const f=document.getElementById("code_reset"),g=document.getElementById("validation_reset_form"),e=document.getElementById("not_verify_message"),d=document.getElementById("reset_replace_password_form");c={email:c.value,reset_code:f.value};fetch("/auth/reset_password/verify_code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Cookies.get("csrftoken")},body:JSON.stringify(c)}).then(b=>{if(!b.ok)throw Error(`HTTP error! Status: ${b.status}`);
return b.json()}).then(b=>{b.status||(e.style.display="block");return b}).then(b=>{b.status&&(g.style.display="none",d.style.display="block");return b}).catch(b=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",b)})}
function resetPassword(){var c=document.getElementById("reset_email_input").value;const f=document.getElementById("reset_password_input").value,g=document.getElementById("reset_password_error"),e=document.getElementById("success_password_reset"),d=document.getElementById("reset_replace_password_form"),b=document.getElementById("reset_message");c={password:f,email:c};fetch("/auth/reset_password/reset",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Cookies.get("csrftoken")},
body:JSON.stringify(c)}).then(a=>{if(!a.ok)throw Error(`HTTP error! Status: ${a.status}`);return a.json()}).then(a=>{a.status||(g.style.display="block");return a}).then(a=>{a.status&&(d.style.display="none",b.style.display="block",e.style.display="block");return a}).catch(a=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",a)})}
document.addEventListener("DOMContentLoaded",function(){function c(e,d,b){d?$(e).text(""):$(e).text(b);return d}const f=["#reset_password_input","#reset_repeat_password_input"],g=["#reset_password_input_error"];f.forEach(e=>{$(e).on("input",function(){var d=$(f[0]).val();const b=$(f[1]).val(),a=c(g[0],/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(d),"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b.");
d=c("#reset_match-error",d===b,"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442.");const [h,k]=[a,d];showOrHideButtonResetRegister(h&&k)})})});function showOrHideButtonResetRegister(c){document.getElementById("replace_reset_password_button").style.display=c?"block":"none"};
